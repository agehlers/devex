def APPNAME = 'devxp'
node('master') {
    stage('build') {
      echo ">>> Get Image Hash"
      IMAGE_HASH = sh (
         script: """oc get istag devxp:latest -o template --template=\"{{.image.dockerImageReference}}\"|awk -F \":\" \'{print $3}\'""",
 	       returnStdout: true).trim()
      echo ">> IMAGE_HASH: $IMAGE_HASH"
      openshiftTag destStream: 'devxp', verbose: 'true', destTag: 'tryout', srcStream: 'devxp', srcTag: "${IMAGE_HASH}"
      echo ">>>> Deployment Complete"
      //openshiftVerifyService svcName: 'platform-dev', apiURL: 'http://platform-dev.devex-platform-dev.svc:3000/', namespace: 'devex-platform-dev', verbose: 'true'
      //echo ">>>> Service Verification Complete" 
    }
}
